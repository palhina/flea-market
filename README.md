# アプリケーション名  
**COACHTECHフリマ**

## ページ一覧  
### ①新規会員登録ページ  
正しく情報を入力し「会員登録」ボタンを押下すると、②のサンクスページに遷移します。  
バリデーションルールは以下の通りです。(名前、メールアドレス、パスワードはいずれも必須項目)  
+ 名前：191文字以内、文字列型。  
+ メールアドレス：191文字以内、文字列型（メールアドレス形式）。既に登録されているメールアドレスとの重複不可。  
+ パスワード：8文字以上191文字以内、文字列型。パスワードと確認用パスワードは同一のものが入力されていること。  
![一般ユーザー新規作成](https://github.com/palhina/Rese/assets/129643430/98751520-ea55-4d18-8926-9a610b91196d)
   
### ②サンクスページ(会員登録後)  
①の画面で正しく会員登録が完了すると、この画面が表示されます。  
「ログインする」ボタン押下で③のログインページへ遷移します。  
![サンクスページ(新規会員登録後)](https://github.com/palhina/Rese/assets/129643430/9308ff85-b450-49f2-97ae-a395a90a59ab)  
  
### ③ログインページ  
②で「ログインする」を押すか、あるいはハンバーガーメニュー「Login」押下で表示されます。
登録した情報を正しく入力し「ログイン」ボタンを押下すると、⑤の飲食店一覧画面が表示されます。  
バリデーションルールは新規会員登録時と同じです。  
![一般ユーザーログイン](https://github.com/palhina/Rese/assets/129643430/25276e7c-9f93-4e19-b6f6-137072b378db)  
  

## 作成した目的  
ある企業の、自社ブランドアイテムを出品するフリーマーケットサイトを作成    

## アプリケーションURL  
GithubURL：https://github.com/palhina/flea-market.git  
  （別途設定が必要です：追記部分に後述）  

## ほかのレポジトリ  
今回はなし  

## 機能一覧  
新規ユーザー会員登録  
ユーザーログイン・ログアウト機能  
ログアウト機能  
 
  
## 使用技術(実行環境)  
Docker version 24.0.5  
Laravel 8.83.27  
Nginx 1.21.1  
MySQL 8.0.35  
PHP 8.1.2  
Composer 2.6.2  
Mailtrap

## テーブル設計  
![テーブル設計図](https://github.com/palhina/Rese/assets/129643430/dc9711a0-e30b-452b-90ff-420cf4a23393)  

## ER図  
![ER図](https://github.com/palhina/Rese/assets/129643430/65f52fa3-46ae-4fec-af8f-66ad55d73b01)  

## 環境構築  

* インストール手順

１．プロジェクトを保存したいディレクトリに移動し、その後Githubからリポジトリをクローンします：

        $git clone https://github.com/palhina/Rese.git
        
その後リポジトリのディレクトリに移動します：

        $cd Rese

２．Dockerを使用し、アプリケーションを起動します：
	
         $docker-compose up -d --build

３．Laravelのパッケージをインストールするために、phpコンテナ内にログインします：
	
          $ docker-compose exec php bash

４．コンテナ内でComposerをインストールします：
	
         $composer install --ignore-platform-req=ext-gd

５．”.env”ファイルを作成し、データベース名、ユーザ名、パスワードなどの必要な環境変数を設定します：
	
         $cp .env.example .env

その後“.env”ファイルを編集し、必要な設定を追加、編集します。

６．アプリケーションキーを作成します：

        $php artisan key:generate

７．データベースのマイグレーションを実行します：

        $php artisan migrate
	
８．必要に応じて、ダミーデータの作成を行ってください：

        $php artisan db:seed

  
* アプリケーションはデフォルトで http://localhost でアクセスできます。

* MySQLはデフォルトで http://localhost:8080 でアクセスできます。
  
* ローカル環境でのメールの検証については、Mailtrapなどをご利用いただき.envファイルで環境設定を行ってください。
    
* エラーが発生する場合、$ sudo chmod -R 777 *コマンドにて権限変更を行ってみてください。
  

## 追記  
**ダミーデータについて**  
* ユーザーデータ(usersテーブル)
ユーザー名test(メールアドレス、以下同様：111@mail.com)、test2(222@mail.com)を作成しています。  
パスワードはいずれも「1234567890」  
* お気に入り(favoritesテーブル)、予約情報(reservationsテーブル)  
  いずれもユーザー名testのみにおいて、適当に作成しております。  
* 店舗情報(shopsテーブル)  
  20店舗の店舗名・画像・エリア・ジャンル・コメントおよび店舗作成者の登録をしております。  
  店舗作成者は任意に設定を行いました。  
* エリア(areasテーブル)、ジャンル(genresテーブル)
  エリアは47都道府県、ジャンルは5つ登録しています。  
* 管理者データ(adminsテーブル)    
  管理者名admin_test、メールアドレスadmin1@mail.com、パスワードは「1234567890」で設定しています。
* 店舗代表者(managersテーブル)  
  店舗代表者名manager1(メールアドレス、以下同様：manager1@mail.com)、manager2(manager2@mail.com)を作成しています。  
  パスワードはいずれも「1234567890」です。    
  
**AWS接続,ブラウザ上での閲覧について**  
以下の設定により、ブラウザ上でアプリケーションを閲覧することが可能です(HTTP接続のみ)。  
  
１．IAMユーザーでログイン  
　　ユーザー名：study（権限：administration）アカウントID：973518952750、パスワード：dYfX58MBでログインしてください。  
２．開発環境として、大阪リージョンにVPC(rese-aws-vpc)を作成しております。  
　　EC2インスタンス(rese-aws-web)とRDSインスタンス(rese-aws-db)を開始してください。  
３．それぞれが正常に起動したことを確認し、EC2インスタンスのパブリックIPv4アドレス、あるいはパブリックIPv4DNSをブラウザに入力してください。  
  
**開発環境と本番環境について**　　
* 開発環境は上記のように大阪リージョンに作成しております。  
* 本番環境を想定したものは、開発環境と異なるVPC(rese-launch-vpc)およびリージョン(東京)で、EC2インスタンス名：rese-launch-web、RDSインスタンス名：rese-launch-dbとして作成しました。  
  本番環境はURL (http://rese-aws-launch.shop) からアクセスも可能です。  
  その場合はElasticIPアドレスを発行しEC2インスタンスに紐づけた後、Route53のレコード名：rese-aws-launch.shopレコードタイプ：Aの値をElasticIPの値に変更してください。  
